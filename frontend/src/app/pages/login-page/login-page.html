<div class="container-fluid d-flex flex-column justify-content-center align-items-center mt-5">
  <div class="row justify-content-center">
    <div class="col-12 text-center">
      <h1
        i18n="@@LOGIN.YOUR_NICKNAME"
        class="display-4 mb-5"
      >Your Nickname:</h1>

      <form class="mb-5" #newGameForm="ngForm" (ngSubmit)="newGame()">
        <div class="mb-4">
          <input
            id="nickname"
            name="nickname"
            [(ngModel)]="nickname"
            (input)="onNicknameChange()"
            #nick="ngModel"
            required
            class="form-control form-control-lg"
            [class.is-invalid]="showNicknameError"
            i18n-placeholder="@@LOGIN.ENTER_NICKNAME"
            placeholder="Enter your nickname"
          />
          
          <!-- Nickname validation error display -->
          @if (showNicknameError) {
            <div class="invalid-feedback">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>
              @if (errorCode === 'EMPTY_NICKNAME')  { <span i18n="@@NICKNAME_VALIDATION.EMPTY_NICKNAME">Nickname cannot be empty</span>          }
              @if (errorCode === 'TOO_SHORT')       { <span i18n="@@NICKNAME_VALIDATION.TOO_SHORT">Nickname must be at least 3 characters</span> }
              @if (errorCode === 'TOO_LONG')        { <span i18n="@@NICKNAME_VALIDATION.TOO_LONG">Nickname cannot exceed 20 characters</span>    }
              @if (errorCode === 'INVALID_CONTENT') { <span i18n="@@NICKNAME_VALIDATION.INVALID_CONTENT">This nickname is not allowed</span>     }
              @if (!isKnownErrorCode())             { <span i18n="@@NICKNAME_VALIDATION.UNKNOWN">Invalid nickname. Please try another one</span> }
            </div>
          }
        </div>

        <div class="mb-4">
          <label i18n="@@LOGIN.CHOOSE_TEAM" class="form-label">Choose your team</label>
          <div class="d-flex justify-content-center gap-4">
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="preferredTeam"
                id="teamWhite"
                value="WHITE"
                [(ngModel)]="preferredTeam"
              />
              <label
                i18n="@@GAME.WHITE_PLAYER"
                class="form-check-label"
                for="teamWhite"
              >White Player</label>
            </div>
            <div class="form-check">
              <input
                class="form-check-input"
                type="radio"
                name="preferredTeam"
                id="teamBlack"
                value="BLACK"
                [(ngModel)]="preferredTeam"
              />
              <label
                i18n="@@GAME.BLACK_PLAYER"
                class="form-check-label"
                for="teamBlack"
              >Black Player</label>
            </div>
          </div>
        </div>

        <div class="d-grid gap-2 col-6 mx-auto">
          <button
            type="submit"
            class="btn btn-primary btn-lg"
            [disabled]="newGameForm.invalid || isLoading"
          >
            @if (!isLoading) {
              <span i18n="@@LOGIN.PLAY">Play</span>
            }

            @if (isLoading) {
              <span class="d-flex align-items-center justify-content-center">
                <span
                  i18n="@@COMMON.LOADING"
                  class="spinner-border spinner-border-sm me-2"
                  role="status"
                  aria-hidden="true"
                ></span>
              </span>
            }
          </button>
        </div>
      </form>
    </div>
  </div>
</div>